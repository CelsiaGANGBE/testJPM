{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nexport class ConnexionComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.user = {\n      email: '',\n      password: ''\n    };\n  }\n  ngOnInit() {\n    // console.log(this.authService.isAuthenticated());\n    if (this.authService.isAuthenticated()) {\n      this.router.navigate(['/accueil']);\n    }\n  }\n  onSubmit() {\n    this.authService.connexion(this.user).subscribe({\n      next: response => {\n        if (response.status) {\n          this.authService.saveUserId(response.data.id);\n          const ex = this.authService.getUserId();\n          console.log('Apres stockage ' + ex);\n          this.router.navigate(['/accueil']);\n        }\n      },\n      error: error => {\n        console.error(\"Une erreur s'est produite : \", error);\n        this.error = error.error.error;\n      }\n    });\n  }\n  static #_ = this.ɵfac = function ConnexionComponent_Factory(t) {\n    return new (t || ConnexionComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ConnexionComponent,\n    selectors: [[\"app-connexion\"]],\n    decls: 35,\n    vars: 2,\n    consts: [[1, \"vh-100\", \"bg-image\", 2, \"background-image\", \"url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp')\"], [1, \"mask\", \"d-flex\", \"align-items-center\", \"h-100\", \"gradient-custom-3\"], [1, \"container\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-12\", \"col-md-9\", \"col-lg-7\", \"col-xl-6\", \"h-100\"], [1, \"card\", 2, \"border-radius\", \"15px\"], [1, \"card-body\", \"p-5\"], [1, \"text-uppercase\", \"text-center\", \"mb-5\"], [\"name\", \"form\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-outline\", \"mb-4\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\"], [1, \"d-flex\", \"justify-content-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", \"btn-block\", \"btn-lg\", \"gradient-custom-4\", \"text-body\"], [1, \"text-center\", \"text-muted\", \"mt-5\", \"mb-0\"], [\"routerLink\", \"/inscription\", 1, \"fw-bold\", \"text-body\"]],\n    template: function ConnexionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵelement(5, \"br\")(6, \"br\")(7, \"br\")(8, \"br\");\n        i0.ɵɵelementStart(9, \"div\", 5)(10, \"div\", 6)(11, \"h2\", 7);\n        i0.ɵɵtext(12, \"Se connecter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"form\", 8, 9);\n        i0.ɵɵlistener(\"ngSubmit\", function ConnexionComponent_Template_form_ngSubmit_13_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(15, \"div\", 10)(16, \"label\", 11);\n        i0.ɵɵtext(17, \"Votre Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function ConnexionComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.user.email = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 10)(20, \"label\", 13);\n        i0.ɵɵtext(21, \"Mot de passe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function ConnexionComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.user.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 15)(24, \"button\", 16);\n        i0.ɵɵtext(25, \"Se connecter\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"p\", 17);\n        i0.ɵɵtext(27, \"Vous n'avez pas de compte? \");\n        i0.ɵɵelementStart(28, \"a\", 18)(29, \"u\");\n        i0.ɵɵtext(30, \"Inscrivez-vous\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelement(31, \"br\")(32, \"br\")(33, \"br\")(34, \"br\");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      }\n    },\n    dependencies: [i2.RouterLink, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n    styles: [\".gradient-custom-3[_ngcontent-%COMP%] {\\r\\n    background: #84fab0;\\r\\n    \\r\\n    background: linear-gradient(to right, rgba(132, 250, 176, 0.5), rgba(143, 211, 244, 0.5))\\r\\n    }\\r\\n    .gradient-custom-4[_ngcontent-%COMP%] {\\r\\n    background: #84fab0;\\r\\n    \\r\\n    background: linear-gradient(to right, rgba(132, 250, 176, 1), rgba(143, 211, 244, 1))\\r\\n    }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29ubmV4aW9uL2Nvbm5leGlvbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksbUJBQW1COztJQUluQjtJQUNBO0lBQ0E7SUFDQSxtQkFBbUI7O0lBSW5CO0lBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIuZ3JhZGllbnQtY3VzdG9tLTMge1xyXG4gICAgYmFja2dyb3VuZDogIzg0ZmFiMDtcclxuICAgIFxyXG4gICAgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoMTMyLCAyNTAsIDE3NiwgMC41KSwgcmdiYSgxNDMsIDIxMSwgMjQ0LCAwLjUpKTtcclxuICAgIFxyXG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDEzMiwgMjUwLCAxNzYsIDAuNSksIHJnYmEoMTQzLCAyMTEsIDI0NCwgMC41KSlcclxuICAgIH1cclxuICAgIC5ncmFkaWVudC1jdXN0b20tNCB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjODRmYWIwO1xyXG4gICAgXHJcbiAgICBiYWNrZ3JvdW5kOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgxMzIsIDI1MCwgMTc2LCAxKSwgcmdiYSgxNDMsIDIxMSwgMjQ0LCAxKSk7XHJcbiAgICBcclxuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgxMzIsIDI1MCwgMTc2LCAxKSwgcmdiYSgxNDMsIDIxMSwgMjQ0LCAxKSlcclxuICAgIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":";;;;AAUA,OAAM,MAAOA,kBAAkB;EAM7BC,YAAoBC,WAAwB,EAAUC,MAAc;IAAhD,gBAAW,GAAXD,WAAW;IAAuB,WAAM,GAANC,MAAM;IAL5D,SAAI,GAAS;MACXC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE;KACX;EAEsE;EACvEC,QAAQ;IACN;IAEE,IAAG,IAAI,CAACJ,WAAW,CAACK,eAAe,EAAE,EAAC;MACpC,IAAI,CAACJ,MAAM,CAACK,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;;EAExC;EACAC,QAAQ;IACN,IAAI,CAACP,WAAW,CAACQ,SAAS,CAAC,IAAI,CAACC,IAAI,CAAC,CAACC,SAAS,CAAC;MAC9CC,IAAI,EAAGC,QAAQ,IAAI;QACjB,IAAIA,QAAQ,CAACC,MAAM,EAAE;UACnB,IAAI,CAACb,WAAW,CAACc,UAAU,CAACF,QAAQ,CAACG,IAAI,CAACC,EAAE,CAAC;UAC7C,MAAMC,EAAE,GAAG,IAAI,CAACjB,WAAW,CAACkB,SAAS,EAAE;UACvCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAGH,EAAE,CAAC;UACnC,IAAI,CAAChB,MAAM,CAACK,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;;MAEtC,CAAC;MACDe,KAAK,EAAGA,KAAU,IAAI;QACpBF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpD,IAAI,CAACA,KAAK,GAAGA,KAAK,CAACA,KAAK,CAACA,KAAK;MAChC;KACD,CAAC;EACJ;EAAC;qBA7BUvB,kBAAkB;EAAA;EAAA;UAAlBA,kBAAkB;IAAAwB;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCV/BC,kCAC2G;QAKjGA,qBAAI;QACJA,8BAA+C;QAECA,6BAAY;QAAAA,iBAAK;QAC7DA,mCAAsD;QAAhDA;UAAA,OAAYC,cAAU;QAAA,EAAC;QAC3BD,gCAA+B;QACSA,4BAAW;QAAAA,iBAAQ;QACzDA,kCAA4G;QAA7EA;UAAA;QAAA,EAAwB;QAAvDA,iBAA4G;QAG9GA,gCAA+B;QACYA,6BAAY;QAAAA,iBAAQ;QAC7DA,kCAAwH;QAAnFA;UAAA;QAAA,EAA2B;QAAhEA,iBAAwH;QAG1HA,gCAA2C;QAE8BA,6BAAY;QAAAA,iBAAS;QAG9FA,8BAA4C;QAAAA,4CAA2B;QAAAA,8BACzC;QAAGA,+BAAc;QAAAA,iBAAI;QAKzDA,sBAAI;QACNA,iBAAM;;;QApBmCA,gBAAwB;QAAxBA,wCAAwB;QAKlBA,eAA2B;QAA3BA,2CAA2B","names":["ConnexionComponent","constructor","authService","router","email","password","ngOnInit","isAuthenticated","navigate","onSubmit","connexion","user","subscribe","next","response","status","saveUserId","data","id","ex","getUserId","console","log","error","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["D:\\testJPM\\frontend\\todo\\src\\app\\connexion\\connexion.component.ts","D:\\testJPM\\frontend\\todo\\src\\app\\connexion\\connexion.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { User } from '../model';\nimport { AuthService } from '../_services/auth.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-connexion',\n  templateUrl: './connexion.component.html',\n  styleUrls: ['./connexion.component.css'],\n})\nexport class ConnexionComponent {\n  user: User = {\n    email: '',\n    password: '',\n  };\n  error: any;\n  constructor(private authService: AuthService, private router: Router) {}\n  ngOnInit(): void {\n    // console.log(this.authService.isAuthenticated());\n    \n      if(this.authService.isAuthenticated()){\n        this.router.navigate(['/accueil']);\n      }\n  }\n  onSubmit() {\n    this.authService.connexion(this.user).subscribe({\n      next: (response) => {\n        if (response.status) {\n          this.authService.saveUserId(response.data.id);\n          const ex = this.authService.getUserId();\n          console.log('Apres stockage ' + ex);\n          this.router.navigate(['/accueil']);\n        }\n      },\n      error: (error: any) => {\n        console.error(\"Une erreur s'est produite : \", error);\n        this.error = error.error.error;\n      },\n    });\n  }\n}\n","<section class=\"vh-100 bg-image\"\n  style=\"background-image: url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp');\">\n  <div class=\"mask d-flex align-items-center h-100 gradient-custom-3\">\n    <div class=\"container h-100\">\n      <div class=\"row d-flex justify-content-center align-items-center h-100\">\n        <div class=\"col-12 col-md-9 col-lg-7 col-xl-6 h-100\">\n          <br><br><br><br>\n          <div class=\"card\" style=\"border-radius: 15px;\">\n            <div class=\"card-body p-5 \">\n              <h2 class=\"text-uppercase text-center mb-5\">Se connecter</h2>\n              <form (ngSubmit)=\"onSubmit()\" name=\"form\" #f=\"ngForm\">\n                <div class=\"form-outline mb-4\">\n                  <label class=\"form-label\" for=\"email\">Votre Email</label>\n                  <input type=\"email\" id=\"email\" [(ngModel)]=\"user.email\" name=\"email\" class=\"form-control form-control-lg\" />\n                </div>\n\n                <div class=\"form-outline mb-4\">\n                  <label class=\"form-label\" for=\"password\">Mot de passe</label>\n                  <input type=\"password\" id=\"password\" [(ngModel)]=\"user.password\" name=\"password\" class=\"form-control form-control-lg\" />\n                </div>\n     \n                <div class=\"d-flex justify-content-center\">\n                  <button type=\"submit\"\n                    class=\"btn btn-success btn-block btn-lg gradient-custom-4 text-body\">Se connecter</button>\n                </div>\n\n                <p class=\"text-center text-muted mt-5 mb-0\">Vous n'avez pas de compte? <a routerLink='/inscription'\n                    class=\"fw-bold text-body\"><u>Inscrivez-vous</u></a></p>\n\n              </form>\n            </div>\n          </div>\n          <br><br><br><br>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}